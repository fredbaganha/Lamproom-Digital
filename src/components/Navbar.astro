---
// Navbar.astro
---

<nav id="navbar" class="bg-transparent fixed top-0 left-0 w-full z-50 transition-colors duration-300">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <!-- Logo -->
      <a href="/" class="flex-shrink-0">
        <img id="logo" src="/logo.png" alt="Lamproom Digital" class="h-10 sm:h-12 w-auto transition-transform duration-300" />
      </a>

      <!-- Desktop Nav -->
      <div class="hidden md:flex items-center space-x-6">
        <a href="/" class="nav-link">Home</a>
        <a href="/about" class="nav-link">About</a>
        <a href="/services" class="nav-link">Services</a>
        <a href="/blog" class="nav-link">Blog</a>
        <a href="/contact" class="nav-link">Contact</a>
      </div>

      <!-- Mobile Hamburger -->
      <div class="md:hidden flex items-center">
        <button id="menu-toggle" class="inline-flex items-center p-2 focus:outline-none">
          <!-- Hamburger icon -->
          <svg id="icon-hamburger" class="h-6 w-6 block" stroke="currentColor" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
          </svg>
          <!-- Close icon -->
          <svg id="icon-close" class="h-6 w-6 hidden" stroke="currentColor" fill="none" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>
    </div>
  </div>

  <!-- Mobile Menu (slide-down) -->
  <div id="mobile-menu" class="origin-top transform scale-y-0 opacity-0 transition-all duration-200 ease-out md:hidden bg-white shadow-md">
    <a href="/" class="mobile-link">Home</a>
    <a href="/about" class="mobile-link">About</a>
    <a href="/services" class="mobile-link">Services</a>
    <a href="/blog" class="mobile-link">Blog</a>
    <a href="/contact" class="mobile-link">Contact</a>
  </div>
</nav>

<style>
  .nav-link {
    @apply px-3 py-2 text-lg font-medium text-brand-black hover:text-brand-orange 
           transition-transform duration-150 ease-out hover:scale-105 active:scale-95;
  }
  .mobile-link {
    @apply block px-4 py-3 text-base font-medium text-brand-black hover:text-brand-orange 
           transition-transform duration-150 ease-out hover:scale-105 active:scale-95;
  }
</style>

<script>
  const toggle = document.getElementById("menu-toggle");
  const menu = document.getElementById("mobile-menu");
  const iconHamburger = document.getElementById("icon-hamburger");
  const iconClose = document.getElementById("icon-close");
  const links = menu.querySelectorAll("a");

  function closeMenu() {
    menu.classList.add("scale-y-0", "opacity-0");
    menu.classList.remove("scale-y-100", "opacity-100");
    iconHamburger.classList.remove("hidden");
    iconClose.classList.add("hidden");
  }

  toggle.addEventListener("click", () => {
    const closed = menu.classList.contains("scale-y-0");
    if (closed) {
      menu.classList.remove("scale-y-0", "opacity-0");
      menu.classList.add("scale-y-100", "opacity-100");
      iconHamburger.classList.add("hidden");
      iconClose.classList.remove("hidden");
    } else {
      closeMenu();
    }
  });

  links.forEach((link) => {
    link.addEventListener("click", () => closeMenu());
  });

  // Scroll background solidify for readability
  window.addEventListener("scroll", () => {
    const navbar = document.getElementById("navbar");
    if (window.scrollY > 0) {
      navbar.classList.add("bg-white", "shadow-md");
    } else {
      navbar.classList.remove("bg-white", "shadow-md");
    }
  });
</script>
